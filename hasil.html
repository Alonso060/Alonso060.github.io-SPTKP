<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hasil Analisis - Sistem Pakar Kecanduan Pornografi</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body>

    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <i class="bi bi-shield-check"></i>
                    SPTKP
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="tes.html">Mulai Tes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="sumber.html">Sumber Bantuan</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">

                <div id="hasil-card" class="card text-center shadow">
                    <div class="card-header fs-4" id="hasil-judul">
                        Memuat Hasil Analisis...
                    </div>
                    <div class="card-body p-4">
                        <p class="card-text">Total Skor Anda:</p>
                        <h1 class="card-title display-1 fw-bold mb-3" id="hasil-skor">-</h1>
                        <p class="lead" id="hasil-deskripsi">Harap tunggu sebentar, kami sedang memproses jawaban Anda.
                        </p>
                        <hr>
                        <div id="hasil-saran" class="mt-3">
                        </div>
                    </div>
                </div>

                <div id="error-message" class="alert alert-warning d-none" role="alert">
                    <h4 class="alert-heading">Skor tidak ditemukan!</h4>
                    <p>Sepertinya Anda belum menyelesaikan tes. Silakan kembali ke halaman tes untuk memulai skrining.
                    </p>
                    <hr>
                    <a href="tes.html" class="btn btn-warning">Mulai Tes Sekarang</a>
                </div>

                <div class="text-center mt-4">
                    <a href="tes.html" class="btn btn-secondary">
                        <i class="bi bi-arrow-repeat"></i> Ulangi Tes
                    </a>
                </div>

            </div>
        </div>
    </main>

    <footer class="footer mt-auto py-3 bg-dark text-white fixed-bottom">
        <div class="container text-center">
            <span class="text-muted">&copy; 2025 Sistem Pakar Kecanduan Pornografi. Hak Cipta Dilindungi.</span>
        </div>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <script>
        // Jalankan script setelah seluruh halaman HTML selesai dimuat
        window.addEventListener('DOMContentLoaded', function () {
            // 1. Ambil elemen-elemen dari DOM untuk diubah
            const hasilCard = document.getElementById('hasil-card');
            const errorMessage = document.getElementById('error-message');
            const judulEl = document.getElementById('hasil-judul');
            const skorEl = document.getElementById('hasil-skor');
            const deskripsiEl = document.getElementById('hasil-deskripsi');
            const saranEl = document.getElementById('hasil-saran');

            // 2. Ambil skor dari localStorage
            const skor = localStorage.getItem('skorTes');

            // 3. Cek apakah skor ada atau tidak
            if (skor === null) {
                // Jika tidak ada skor, sembunyikan kartu hasil dan tampilkan pesan error
                hasilCard.classList.add('d-none');
                errorMessage.classList.remove('d-none');
                return; // Hentikan eksekusi script
            }

            // Konversi skor dari string ke angka
            const skorNumerik = parseInt(skor, 10);

            // Variabel untuk menampung data hasil
            let tingkatRisiko, deskripsi, saran, kelasWarna;

            // 4. Logika Aturan (Rule-Based Logic) untuk menentukan hasil
            if (skorNumerik >= 26) {
                tingkatRisiko = "Risiko Tinggi";
                kelasWarna = "danger"; // Merah
                deskripsi = "Skor Anda menunjukkan adanya indikator kuat yang konsisten dengan pola kecanduan perilaku. Pola ini kemungkinan besar telah menyebabkan dampak negatif yang signifikan pada berbagai aspek kehidupan Anda.";
                saran = `<p class="mb-3">Sangat disarankan untuk tidak menunda dan segera mencari bantuan dari profesional kesehatan mental seperti psikolog, psikiater, atau konselor adiksi untuk mendapatkan evaluasi dan penanganan lebih lanjut.</p>
                         <a href="sumber.html" class="btn btn-danger">Cari Bantuan Profesional</a>`;
            } else if (skorNumerik >= 11) {
                tingkatRisiko = "Risiko Sedang";
                kelasWarna = "warning"; // Kuning
                deskripsi = "Skor Anda mengindikasikan adanya beberapa gejala yang perlu diwaspadai. Perilaku Anda mungkin mulai menunjukkan pola kompulsif dan berpotensi menimbulkan masalah jika tidak dikelola dengan baik.";
                saran = `<p class="mb-3">Penting untuk mulai merefleksikan dan menyadari dampak dari kebiasaan ini. Mempertimbangkan untuk berbicara dengan konselor atau terapis bisa menjadi langkah preventif yang sangat baik.</p>
                         <a href="sumber.html" class="btn btn-warning">Lihat Sumber Bantuan</a>`;
            } else { // Skor 0-10
                tingkatRisiko = "Risiko Rendah";
                kelasWarna = "success"; // Hijau
                deskripsi = "Skor Anda tidak menunjukkan adanya pola perilaku yang mengarah pada kecanduan pornografi saat ini. Kebiasaan Anda tampaknya masih berada dalam batas yang terkendali dan tidak menimbulkan masalah signifikan.";
                saran = `<p>Tetap pertahankan kebiasaan yang sehat dan seimbang dalam menggunakan internet. Teruslah waspada terhadap perubahan perilaku Anda di masa depan.</p>`;
            }

            // 5. Tampilkan hasil secara dinamis ke halaman
            skorEl.textContent = skorNumerik;
            judulEl.textContent = `Hasil Analisis: ${tingkatRisiko}`;
            deskripsiEl.textContent = deskripsi;
            saranEl.innerHTML = saran; // Gunakan innerHTML karena 'saran' mengandung tag HTML

            // Ubah warna card header dan border sesuai tingkat risiko
            hasilCard.classList.add(`border-${kelasWarna}`);
            judulEl.classList.add(`bg-${kelasWarna}-subtle`);
        });
    </script>
</body>

</html>